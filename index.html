<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PharmPath | Your Pharmacy Career Journey</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=Space+Mono:wght@400;700&family=Crimson+Pro:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">

  <!-- Plotly (charts) -->
  <script src="https://cdn.plot.ly/plotly-2.24.1.min.js"></script>

  <style>
    /* ============================================
       CSS VARIABLES & THEME SYSTEM
       ============================================ */
    :root {
      --primary-50: #f0fdfa;
      --primary-100: #ccfbf1;
      --primary-200: #99f6e4;
      --primary-300: #5eead4;
      --primary-400: #2dd4bf;
      --primary-500: #14b8a6;
      --primary-600: #0d9488;
      --primary-700: #0f766e;
      --primary-800: #115e59;
      --primary-900: #134e4a;

      /* Expanded secondary scale (fixes undefined vars used later) */
      --secondary-50: #f5f3ff;
      --secondary-100: #ede9fe;
      --secondary-200: #ddd6fe;
      --secondary-300: #c4b5fd;
      --secondary-400: #a78bfa;
      --secondary-500: #8b5cf6;
      --secondary-600: #7c3aed;

      --accent-400: #fbbf24;
      --accent-500: #f59e0b;
      --accent-600: #d97706;

      --gray-50: #fafafa;
      --gray-100: #f4f4f5;
      --gray-200: #e4e4e7;
      --gray-300: #d4d4d8;
      --gray-400: #a1a1aa;
      --gray-500: #71717a;
      --gray-600: #52525b;
      --gray-700: #3f3f46;
      --gray-800: #27272a;
      --gray-900: #18181b;

      --success: #22c55e;
      --warning: #f59e0b;
      --error: #ef4444;
      --info: #3b82f6;

      --shadow-sm: 0 1px 2px rgba(0,0,0,0.05);
      --shadow-md: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -2px rgba(0,0,0,0.1);
      --shadow-lg: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -4px rgba(0,0,0,0.1);
      --shadow-xl: 0 20px 25px -5px rgba(0,0,0,0.1), 0 8px 10px -6px rgba(0,0,0,0.1);

      --radius-sm: 6px;
      --radius-md: 10px;
      --radius-lg: 16px;
      --radius-xl: 24px;
      --radius-full: 9999px;

      --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
      --transition-base: 200ms cubic-bezier(0.4, 0, 0.2, 1);
      --transition-slow: 300ms cubic-bezier(0.4, 0, 0.2, 1);

      /* Semantic tokens */
      --surface: #ffffff;
      --surface-2: #ffffff;
      --surface-muted: var(--gray-50);
      --border: var(--gray-200);
      --text: var(--gray-800);
      --text-muted: var(--gray-500);

      --focus-ring: 0 0 0 3px rgba(20, 184, 166, 0.18);
    }

    *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

    html { scroll-behavior: smooth; -webkit-font-smoothing: antialiased; }

    body {
      font-family: 'Plus Jakarta Sans', sans-serif;
      background: var(--surface-muted);
      color: var(--text);
      line-height: 1.6;
      min-height: 100vh;
    }

    /* Skip link for accessibility */
    .skip-link {
      position: absolute;
      left: -999px;
      top: 12px;
      background: var(--surface);
      color: var(--gray-900);
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      padding: 0.6rem 0.9rem;
      box-shadow: var(--shadow-md);
      z-index: 2000;
    }
    .skip-link:focus { left: 12px; outline: none; box-shadow: var(--shadow-md), var(--focus-ring); }

    /* Soft background glow */
    body::before {
      content: '';
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background:
        radial-gradient(circle at 20% 20%, rgba(20, 184, 166, 0.035) 0%, transparent 55%),
        radial-gradient(circle at 80% 80%, rgba(139, 92, 246, 0.030) 0%, transparent 55%);
      pointer-events: none;
      z-index: -1;
    }

    /* Focus styles */
    :focus { outline: none; }
    :focus-visible { box-shadow: var(--focus-ring); border-radius: var(--radius-md); }

    /* Reduced motion */
    @media (prefers-reduced-motion: reduce) {
      * { animation: none !important; transition: none !important; scroll-behavior: auto !important; }
    }

    .app-container { display: flex; min-height: 100vh; }

    /* Sidebar */
    .sidebar {
      width: 280px;
      background: var(--surface);
      border-right: 1px solid var(--border);
      display: flex;
      flex-direction: column;
      position: fixed;
      height: 100vh;
      left: 0;
      top: 0;
      z-index: 100;
      transform: translateX(0);
      transition: transform var(--transition-slow);
    }

    .sidebar-header { padding: 1.5rem; border-bottom: 1px solid var(--gray-100); }

    .logo { display: flex; align-items: center; gap: 0.75rem; text-decoration: none; }

    .logo-icon {
      width: 44px; height: 44px;
      background: linear-gradient(135deg, var(--primary-500), var(--primary-600));
      border-radius: var(--radius-lg);
      display: flex; align-items: center; justify-content: center;
      font-size: 1.5rem;
      box-shadow: var(--shadow-md);
    }

    .logo-text { font-weight: 800; font-size: 1.5rem; color: var(--gray-900); letter-spacing: -0.03em; }
    .logo-text span { color: var(--primary-600); }

    .user-stats {
      padding: 1rem 1.5rem;
      background: linear-gradient(135deg, var(--primary-600), var(--primary-700));
      margin: 1rem;
      border-radius: var(--radius-lg);
      color: white;
      position: relative;
      overflow: hidden;
      box-shadow: var(--shadow-md);
    }

    .user-stats::before {
      content: '';
      position: absolute;
      top: -50%;
      right: -50%;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle, rgba(255,255,255,0.10) 0%, transparent 70%);
    }

    .user-name { font-weight: 700; font-size: 1.1rem; margin-bottom: 0.25rem; position: relative; }
    .user-level { display: flex; align-items: center; gap: 0.5rem; font-size: 0.85rem; opacity: 0.9; position: relative; }

    .level-badge {
      background: var(--accent-500);
      color: var(--gray-900);
      padding: 2px 8px;
      border-radius: var(--radius-full);
      font-weight: 800;
      font-size: 0.75rem;
    }

    .xp-bar { margin-top: 0.75rem; position: relative; }

    .xp-bar-track {
      height: 8px;
      background: rgba(255,255,255,0.20);
      border-radius: var(--radius-full);
      overflow: hidden;
    }

    .xp-bar-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--accent-400), var(--accent-500));
      border-radius: var(--radius-full);
      transition: width var(--transition-slow);
    }

    .xp-text { display: flex; justify-content: space-between; font-size: 0.75rem; margin-top: 0.25rem; opacity: 0.9; position: relative; }

    .nav-section { flex: 1; overflow-y: auto; padding: 1rem 0; }

    .nav-group { margin-bottom: 1rem; }

    .nav-group-title {
      padding: 0.5rem 1.5rem;
      font-size: 0.7rem;
      font-weight: 800;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--gray-400);
    }

    .nav-item {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.75rem 1.5rem;
      color: var(--gray-600);
      text-decoration: none;
      font-weight: 600;
      transition: all var(--transition-fast);
      cursor: pointer;
      border: none;
      background: none;
      width: 100%;
      text-align: left;
      position: relative;
    }

    .nav-item:hover { background: var(--gray-50); color: var(--gray-900); }

    .nav-item.active { background: var(--primary-50); color: var(--primary-700); }

    .nav-item.active::before {
      content: '';
      position: absolute;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
      width: 4px;
      height: 60%;
      background: var(--primary-500);
      border-radius: 0 4px 4px 0;
    }

    .nav-icon { width: 20px; height: 20px; display: flex; align-items: center; justify-content: center; font-size: 1.1rem; }

    .nav-badge {
      margin-left: auto;
      background: var(--primary-100);
      color: var(--primary-700);
      padding: 2px 8px;
      border-radius: var(--radius-full);
      font-size: 0.7rem;
      font-weight: 800;
    }

    .nav-badge.new { background: var(--secondary-500); color: #fff; animation: pulse 2s infinite; }

    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.72; } }

    .streak-counter { padding: 1rem 1.5rem; border-top: 1px solid var(--gray-100); display: flex; align-items: center; gap: 0.75rem; }

    .streak-flame { font-size: 1.5rem; animation: flicker 1s ease-in-out infinite; }

    @keyframes flicker { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.08); } }

    .streak-info { flex: 1; }
    .streak-count { font-weight: 800; font-size: 1.05rem; color: var(--gray-900); }
    .streak-label { font-size: 0.75rem; color: var(--gray-500); }

    .main-content {
      flex: 1;
      margin-left: 280px;
      padding: 2rem;
      max-width: calc(100vw - 280px);
    }

    /* Mobile sidebar overlay + floating menu button */
    .sidebar-backdrop {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.45);
      backdrop-filter: blur(2px);
      z-index: 90;
    }

    .fab-menu {
      display: none;
      position: fixed;
      left: 16px;
      bottom: 18px;
      z-index: 120;
      width: 54px;
      height: 54px;
      border-radius: 50%;
      border: 1px solid rgba(255,255,255,0.20);
      background: linear-gradient(135deg, var(--primary-600), var(--secondary-600));
      color: white;
      font-size: 1.25rem;
      box-shadow: var(--shadow-xl);
      cursor: pointer;
      transition: transform var(--transition-fast);
    }
    .fab-menu:hover { transform: translateY(-2px); }

    /* Top Bar */
    .top-bar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; gap: 1rem; }

    .page-title { font-size: 1.75rem; font-weight: 800; color: var(--gray-900); letter-spacing: -0.02em; }

    .page-subtitle { color: var(--gray-500); font-size: 0.9rem; margin-top: 0.25rem; }

    .top-actions { display: flex; align-items: center; gap: 0.75rem; }

    .search-pill {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.6rem 0.8rem;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius-full);
      box-shadow: var(--shadow-sm);
      min-width: 260px;
    }

    .search-pill input {
      border: none;
      outline: none;
      width: 100%;
      font-size: 0.9rem;
      background: transparent;
      color: var(--gray-800);
    }

    .btn {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.75rem 1.25rem;
      border-radius: var(--radius-md);
      font-weight: 700;
      font-size: 0.9rem;
      cursor: pointer;
      transition: all var(--transition-fast);
      border: none;
      font-family: inherit;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--primary-500), var(--primary-600));
      color: white;
      box-shadow: var(--shadow-md), 0 4px 12px rgba(20, 184, 166, 0.30);
    }

    .btn-primary:hover { transform: translateY(-2px); box-shadow: var(--shadow-lg), 0 6px 16px rgba(20, 184, 166, 0.40); }

    .btn-secondary { background: var(--surface); color: var(--gray-700); border: 1px solid var(--border); }

    .btn-secondary:hover { background: var(--gray-50); }

    .btn-accent { background: linear-gradient(135deg, var(--secondary-500), var(--secondary-600)); color: white; box-shadow: var(--shadow-md), 0 4px 12px rgba(139, 92, 246, 0.30); }

    .btn-accent:hover { transform: translateY(-2px); box-shadow: var(--shadow-lg), 0 6px 16px rgba(139, 92, 246, 0.40); }

    .btn-ghost { background: transparent; color: var(--gray-600); }

    .btn-ghost:hover { background: var(--gray-100); }

    .btn-sm { padding: 0.5rem 0.75rem; font-size: 0.8rem; }
    .btn-lg { padding: 1rem 2rem; font-size: 1rem; }

    .card {
      background: var(--surface);
      border-radius: var(--radius-lg);
      border: 1px solid var(--border);
      box-shadow: var(--shadow-sm);
      transition: all var(--transition-base);
    }

    .card:hover { box-shadow: var(--shadow-md); }

    .card-header { padding: 1.25rem 1.5rem; border-bottom: 1px solid var(--gray-100); display: flex; justify-content: space-between; align-items: center; }

    .card-title { font-weight: 800; font-size: 1.05rem; color: var(--gray-900); display: flex; align-items: center; gap: 0.5rem; }

    .card-body { padding: 1.5rem; }

    .tab-content { display: none; animation: fadeIn 0.28s ease; }
    .tab-content.active { display: block; }

    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

    .grid-2 { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1.5rem; }
    .grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 1.5rem; }

    .form-group { margin-bottom: 1.25rem; }

    .form-label { display: block; font-weight: 700; font-size: 0.85rem; color: var(--gray-700); margin-bottom: 0.5rem; }

    .form-input, .form-select, .form-textarea {
      width: 100%;
      padding: 0.75rem 1rem;
      border: 2px solid var(--gray-200);
      border-radius: var(--radius-md);
      font-family: inherit;
      font-size: 0.9rem;
      transition: all var(--transition-fast);
      background: var(--surface);
    }

    .form-input:focus, .form-select:focus, .form-textarea:focus {
      outline: none;
      border-color: var(--primary-500);
      box-shadow: var(--focus-ring);
    }

    .form-select {
      cursor: pointer;
      appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%23a1a1aa'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 12px center;
      background-size: 16px;
      padding-right: 40px;
    }

    .alert {
      padding: 1rem;
      border-radius: var(--radius-md);
      margin-bottom: 1.25rem;
      display: flex;
      align-items: flex-start;
      gap: 0.75rem;
    }

    .alert-icon { font-size: 1.25rem; flex-shrink: 0; }

    .alert-info { background: rgba(59, 130, 246, 0.10); border: 1px solid rgba(59, 130, 246, 0.20); color: #1e40af; }
    .alert-success { background: rgba(34, 197, 94, 0.10); border: 1px solid rgba(34, 197, 94, 0.20); color: #166534; }
    .alert-warning { background: rgba(245, 158, 11, 0.10); border: 1px solid rgba(245, 158, 11, 0.20); color: #92400e; }

    /* ============================================
       NOBEL COUNCIL SPECIFIC STYLES
       ============================================ */
    .council-hero {
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
      border-radius: var(--radius-xl);
      padding: 3rem;
      color: white;
      position: relative;
      overflow: hidden;
      margin-bottom: 1.25rem;
      box-shadow: var(--shadow-xl);
    }

    .council-hero::before {
      content: '';
      position: absolute;
      inset: 0;
      background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.03'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
      opacity: 0.55;
    }

    .council-hero-content { position: relative; z-index: 1; }

    .council-hero h1 {
      font-size: 2.5rem;
      font-weight: 900;
      margin-bottom: 0.5rem;
      background: linear-gradient(135deg, #fff 0%, #a78bfa 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .council-hero p { opacity: 0.86; font-size: 1.1rem; max-width: 720px; }

    .council-stats { display: flex; gap: 2rem; margin-top: 2rem; flex-wrap: wrap; }

    .council-stat { text-align: center; min-width: 120px; }

    .council-stat-value { font-size: 2rem; font-weight: 900; font-family: 'Space Mono', monospace; color: var(--accent-400); }

    .council-stat-label { font-size: 0.8rem; opacity: 0.75; text-transform: uppercase; letter-spacing: 0.06em; }

    /* NEW: Disclaimer banner (Nobel Council) */
    .disclaimer-banner {
      display: flex;
      align-items: flex-start;
      gap: 0.85rem;
      padding: 1rem 1.1rem;
      border-radius: var(--radius-lg);
      border: 1px solid rgba(245, 158, 11, 0.35);
      background: linear-gradient(135deg, rgba(245, 158, 11, 0.10), rgba(139, 92, 246, 0.06));
      color: var(--gray-800);
      margin-bottom: 1.5rem;
    }

    .disclaimer-icon {
      width: 38px;
      height: 38px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(245, 158, 11, 0.16);
      border: 1px solid rgba(245, 158, 11, 0.25);
      font-size: 1.1rem;
      flex-shrink: 0;
    }

    .disclaimer-text { flex: 1; font-size: 0.92rem; color: var(--gray-700); line-height: 1.65; }

    .disclaimer-text strong { color: var(--gray-900); }

    .laureate-browser { display: grid; grid-template-columns: 300px 1fr; gap: 1.5rem; min-height: 600px; }

    .laureate-sidebar { background: var(--surface); border-radius: var(--radius-lg); border: 1px solid var(--border); overflow: hidden; display: flex; flex-direction: column; box-shadow: var(--shadow-sm); }

    .laureate-search { padding: 1rem; border-bottom: 1px solid var(--gray-100); }

    .laureate-search input {
      width: 100%;
      padding: 0.75rem 1rem;
      border: 2px solid var(--gray-200);
      border-radius: var(--radius-md);
      font-size: 0.9rem;
      background: var(--surface);
    }

    .laureate-search input:focus { outline: none; border-color: var(--primary-500); box-shadow: var(--focus-ring); }

    .domain-tabs { display: flex; border-bottom: 1px solid var(--gray-100); }

    .domain-tab {
      flex: 1;
      padding: 0.75rem;
      text-align: center;
      font-size: 0.8rem;
      font-weight: 800;
      cursor: pointer;
      border: none;
      background: none;
      color: var(--gray-500);
      transition: all var(--transition-fast);
    }

    .domain-tab:hover { background: var(--gray-50); }

    .domain-tab.active { color: var(--primary-700); background: var(--primary-50); border-bottom: 2px solid var(--primary-500); }

    .laureate-list { flex: 1; overflow-y: auto; padding: 0.5rem; }

    .laureate-item { padding: 0.75rem 1rem; border-radius: var(--radius-md); cursor: pointer; transition: all var(--transition-fast); border: 2px solid transparent; margin-bottom: 0.25rem; }

    .laureate-item:hover { background: var(--gray-50); }

    .laureate-item.selected { background: var(--primary-50); border-color: var(--primary-300); }

    .laureate-item-name { font-weight: 800; font-size: 0.92rem; color: var(--gray-900); }

    .laureate-item-year { font-size: 0.75rem; color: var(--gray-500); font-family: 'Space Mono', monospace; }

    .laureate-item-discovery {
      font-size: 0.8rem;
      color: var(--gray-600);
      margin-top: 0.25rem;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .insight-panel { background: var(--surface); border-radius: var(--radius-lg); border: 1px solid var(--border); overflow: hidden; box-shadow: var(--shadow-sm); }

    .insight-header { padding: 1.5rem; background: linear-gradient(135deg, var(--gray-50), var(--surface)); border-bottom: 1px solid var(--gray-100); }

    .insight-laureate { display: flex; align-items: center; gap: 1rem; }

    .insight-avatar {
      width: 64px;
      height: 64px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--primary-400), var(--secondary-400));
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      color: white;
      font-weight: 900;
      box-shadow: var(--shadow-md);
    }

    .insight-name { font-size: 1.25rem; font-weight: 900; color: var(--gray-900); }
    .insight-meta { font-size: 0.85rem; color: var(--gray-500); }

    .insight-domain-badge { display: inline-block; padding: 4px 12px; border-radius: var(--radius-full); font-size: 0.75rem; font-weight: 900; text-transform: uppercase; margin-top: 0.5rem; }

    .insight-domain-badge.physics { background: #dbeafe; color: #1e40af; }
    .insight-domain-badge.chemistry { background: #dcfce7; color: #166534; }
    .insight-domain-badge.medicine { background: #fce7f3; color: #9d174d; }
    .insight-domain-badge.economics { background: #fef3c7; color: #92400e; }

    .insight-body { padding: 1.5rem; }

    .insight-section { margin-bottom: 1.5rem; }

    .insight-section h4 { font-size: 0.8rem; font-weight: 900; text-transform: uppercase; letter-spacing: 0.06em; color: var(--gray-500); margin-bottom: 0.75rem; }

    .discovery-card { background: var(--gray-50); border-radius: var(--radius-md); padding: 1.25rem; border-left: 4px solid var(--primary-500); }

    .discovery-card h5 { font-weight: 900; color: var(--gray-900); margin-bottom: 0.5rem; }

    .discovery-card p { color: var(--gray-600); font-size: 0.9rem; line-height: 1.7; }

    .keywords-list { display: flex; flex-wrap: wrap; gap: 0.5rem; }

    .keyword-tag { background: var(--primary-100); color: var(--primary-700); padding: 4px 12px; border-radius: var(--radius-full); font-size: 0.8rem; font-weight: 700; }

    /* Consultation Interface */
    .consultation-card {
      background: linear-gradient(135deg, var(--secondary-50), var(--secondary-100));
      border: 2px solid var(--secondary-200);
      border-radius: var(--radius-lg);
      padding: 1.5rem;
      margin-top: 1.5rem;
    }

    .consultation-card h4 { display: flex; align-items: center; gap: 0.5rem; font-size: 1rem; color: var(--secondary-600); margin-bottom: 1rem; font-weight: 900; }

    /* Results Display */
    .insight-result { background: var(--surface); border-radius: var(--radius-lg); border: 1px solid var(--border); margin-top: 1.5rem; overflow: hidden; box-shadow: var(--shadow-sm); }

    .insight-result-header { padding: 1.25rem 1.5rem; background: linear-gradient(135deg, var(--primary-600), var(--secondary-600)); color: white; }

    .insight-result-header h3 { font-size: 1.1rem; font-weight: 900; display: flex; align-items: center; gap: 0.5rem; }

    .insight-result-body { padding: 1.5rem; }

    .insight-box { background: linear-gradient(135deg, var(--primary-50), var(--secondary-50)); border-left: 4px solid var(--primary-500); padding: 1.25rem; border-radius: 0 var(--radius-md) var(--radius-md) 0; font-size: 1rem; line-height: 1.7; color: var(--gray-800); font-family: 'Crimson Pro', serif; }

    .strategy-box { background: linear-gradient(135deg, #f0fdf4, #dcfce7); border-left: 4px solid var(--success); padding: 1.25rem; border-radius: 0 var(--radius-md) var(--radius-md) 0; margin-top: 1rem; }

    .strategy-box h5 { font-size: 0.85rem; font-weight: 900; color: #166534; margin-bottom: 0.5rem; display: flex; align-items: center; gap: 0.5rem; }

    .strategy-box p { color: #15803d; font-size: 0.95rem; line-height: 1.6; }

    .math-display { background: var(--gray-900); color: #22d3ee; padding: 1.5rem; border-radius: var(--radius-md); font-family: 'Space Mono', monospace; font-size: 1.1rem; text-align: center; margin: 1rem 0; overflow-x: auto; }

    .metrics-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin-top: 1rem; }

    .metric-card { background: var(--gray-50); border-radius: var(--radius-md); padding: 1rem; text-align: center; border: 1px solid var(--gray-200); }

    .metric-value { font-size: 1.5rem; font-weight: 900; color: var(--primary-600); font-family: 'Space Mono', monospace; }

    .metric-label { font-size: 0.75rem; color: var(--gray-500); text-transform: uppercase; letter-spacing: 0.06em; margin-top: 0.25rem; font-weight: 800; }

    .analysis-pipeline { display: flex; justify-content: space-between; align-items: center; padding: 1.5rem; background: var(--gray-50); border-radius: var(--radius-lg); margin: 1.5rem 0; position: relative; border: 1px solid var(--gray-200); }

    .analysis-pipeline::before { content: ''; position: absolute; top: 50%; left: 10%; right: 10%; height: 2px; background: var(--gray-300); z-index: 0; }

    .pipeline-step { background: var(--surface); border: 2px solid var(--gray-200); border-radius: var(--radius-lg); padding: 1rem; text-align: center; z-index: 1; min-width: 120px; transition: all var(--transition-base); }

    .pipeline-step.active { border-color: var(--primary-500); box-shadow: var(--shadow-md); }

    .pipeline-icon { font-size: 1.5rem; margin-bottom: 0.5rem; }

    .pipeline-label { font-size: 0.8rem; font-weight: 800; color: var(--gray-700); }

    .pipeline-sublabel { font-size: 0.7rem; color: var(--gray-500); }

    .chart-container { height: 300px; margin: 1rem 0; }

    /* Loading State */
    .loading-overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.5); backdrop-filter: blur(4px); z-index: 1000; justify-content: center; align-items: center; }
    .loading-overlay.active { display: flex; }

    .loading-spinner { width: 60px; height: 60px; border: 4px solid rgba(255,255,255,0.3); border-top-color: var(--primary-400); border-radius: 50%; animation: spin 1s linear infinite; }
    @keyframes spin { to { transform: rotate(360deg); } }

    /* Toast */
    .toast-container { position: fixed; bottom: 1.5rem; right: 1.5rem; z-index: 1001; display: flex; flex-direction: column; gap: 0.75rem; }

    .toast { background: var(--surface); border-radius: var(--radius-lg); padding: 1rem 1.25rem; box-shadow: var(--shadow-xl); display: flex; align-items: center; gap: 0.75rem; animation: slideIn 0.3s ease, slideOut 0.3s ease 2.7s forwards; max-width: 360px; border: 1px solid var(--border); }

    @keyframes slideIn { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
    @keyframes slideOut { from { transform: translateX(0); opacity: 1; } to { transform: translateX(100%); opacity: 0; } }

    .toast-icon { width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.25rem; flex-shrink: 0; color: #111827; }

    .toast-icon.xp { background: linear-gradient(135deg, var(--accent-400), var(--accent-500)); }

    .toast-content h4 { font-weight: 900; font-size: 0.9rem; color: var(--gray-900); }
    .toast-content p { font-size: 0.8rem; color: var(--gray-500); }

    /* Footer */
    .app-footer {
      margin-top: 2rem;
      padding-top: 1.25rem;
      border-top: 1px solid var(--gray-200);
      color: var(--gray-500);
      font-size: 0.82rem;
      display: flex;
      flex-wrap: wrap;
      gap: 0.8rem;
      align-items: center;
      justify-content: space-between;
    }

    .footer-links { display: flex; gap: 0.6rem; flex-wrap: wrap; }

    .footer-links button {
      border: none;
      background: none;
      padding: 0;
      color: var(--primary-700);
      font-weight: 800;
      cursor: pointer;
    }
    .footer-links button:hover { text-decoration: underline; }

    /* Modal (Disclaimer) */
    .modal-backdrop {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.55);
      backdrop-filter: blur(4px);
      z-index: 1500;
      padding: 24px;
      overflow-y: auto;
    }

    .modal-backdrop.active { display: block; }

    .modal {
      max-width: 860px;
      margin: 28px auto;
      background: var(--surface);
      border-radius: var(--radius-xl);
      border: 1px solid var(--border);
      box-shadow: var(--shadow-xl);
      overflow: hidden;
    }

    .modal-header {
      padding: 1.25rem 1.5rem;
      background: linear-gradient(135deg, var(--gray-50), var(--surface));
      border-bottom: 1px solid var(--gray-100);
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 1rem;
    }

    .modal-title {
      font-weight: 900;
      color: var(--gray-900);
      font-size: 1.05rem;
      letter-spacing: -0.01em;
    }

    .modal-body {
      padding: 1.25rem 1.5rem;
      color: var(--gray-700);
      line-height: 1.8;
      font-size: 0.95rem;
    }

    .modal-body ul { padding-left: 1.2rem; margin: 0.75rem 0; }
    .modal-body li { margin: 0.35rem 0; }

    .modal-footer {
      padding: 1.1rem 1.5rem;
      border-top: 1px solid var(--gray-100);
      display: flex;
      gap: 0.75rem;
      justify-content: flex-end;
      flex-wrap: wrap;
      background: var(--surface);
    }

    /* Responsive */
    @media (max-width: 1200px) {
      .laureate-browser { grid-template-columns: 1fr; }
      .laureate-sidebar { max-height: 420px; }
    }

    @media (max-width: 900px) {
      .search-pill { min-width: 180px; }
    }

    @media (max-width: 768px) {
      .sidebar { transform: translateX(-100%); }
      body.sidebar-open .sidebar { transform: translateX(0); }
      .sidebar-backdrop { display: none; }
      body.sidebar-open .sidebar-backdrop { display: block; }

      .main-content { margin-left: 0; max-width: 100vw; padding: 1rem; }
      .grid-2, .grid-3 { grid-template-columns: 1fr; }
      .metrics-grid { grid-template-columns: 1fr; }

      .analysis-pipeline { flex-direction: column; gap: 1rem; }
      .analysis-pipeline::before { display: none; }

      .fab-menu { display: inline-flex; align-items: center; justify-content: center; }
      .top-actions { flex: 1; justify-content: flex-end; }
      .search-pill { display: none; }
    }
  </style>
</head>
<body>
  <a class="skip-link" href="#main">Skip to content</a>

  <!-- Mobile overlay for sidebar -->
  <div class="sidebar-backdrop" id="sidebar-backdrop" onclick="closeSidebar()" aria-hidden="true"></div>
  <button class="fab-menu" id="fab-menu" onclick="toggleSidebar()" aria-label="Open menu">‚ò∞</button>

  <div class="app-container">
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <a href="#" class="logo" onclick="showTab('dashboard');return false;">
          <div class="logo-icon">üíä</div>
          <div class="logo-text">Pharm<span>Path</span></div>
        </a>
      </div>

      <div class="user-stats">
        <div class="user-name" id="user-name">David Chen</div>
        <div class="user-level">
          <span class="level-badge">LVL 4</span>
          <span>Career Explorer</span>
        </div>
        <div class="xp-bar">
          <div class="xp-bar-track">
            <div class="xp-bar-fill" id="xp-fill" style="width: 65%"></div>
          </div>
          <div class="xp-text">
            <span id="current-xp">1,850 XP</span>
            <span id="next-level-xp">2,500 XP</span>
          </div>
        </div>
      </div>

      <nav class="nav-section" aria-label="Primary">
        <div class="nav-group">
          <div class="nav-group-title">Journey</div>
          <button class="nav-item active" data-tab="dashboard" onclick="showTab('dashboard')">
            <span class="nav-icon">üè†</span>
            Dashboard
          </button>
          <button class="nav-item" data-tab="career-path" onclick="showTab('career-path')">
            <span class="nav-icon">üó∫Ô∏è</span>
            Career Path
          </button>
        </div>

        <div class="nav-group">
          <div class="nav-group-title">Intelligence</div>
          <button class="nav-item" data-tab="nobel-council" onclick="showTab('nobel-council')">
            <span class="nav-icon">üî¨</span>
            Nobel Council
            <span class="nav-badge new">300+</span>
          </button>
        </div>

        <div class="nav-group">
          <div class="nav-group-title">Build</div>
          <button class="nav-item" data-tab="portfolio" onclick="showTab('portfolio')">
            <span class="nav-icon">üìÑ</span>
            Portfolio
          </button>
          <button class="nav-item" data-tab="network" onclick="showTab('network')">
            <span class="nav-icon">üë•</span>
            Network
          </button>
        </div>
      </nav>

      <div class="streak-counter">
        <span class="streak-flame">üî•</span>
        <div class="streak-info">
          <div class="streak-count">7 day streak!</div>
          <div class="streak-label">Keep it going!</div>
        </div>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content" id="main" tabindex="-1">
      <!-- Dashboard Tab -->
      <div class="tab-content active" id="dashboard-tab">
        <div class="top-bar">
          <div>
            <h1 class="page-title">Welcome back, David!</h1>
            <p class="page-subtitle">Explore insights from 300+ Nobel Laureates to advance your career</p>
          </div>
          <div class="top-actions">
            <div class="search-pill" title="Quick search (filters Nobel Council list when open)">
              <span aria-hidden="true">üîé</span>
              <input id="global-search" type="text" placeholder="Search laureates‚Ä¶" oninput="syncGlobalSearch(this.value)" />
            </div>
            <button class="btn btn-secondary" onclick="showTab('nobel-council')">
              <span aria-hidden="true">üèÜ</span> Nobel Council
            </button>
          </div>
        </div>

        <div class="alert alert-info">
          <span class="alert-icon">üî¨</span>
          <div>
            <strong>New Feature!</strong> The Nobel Council is now live with 300+ laureates across Physics, Chemistry, Medicine, and Economics. Use it for educational exploration and structured ideation.
          </div>
        </div>

        <div class="grid-2">
          <div class="card" onclick="showTab('nobel-council')" style="cursor: pointer;">
            <div class="card-body" style="text-align: center; padding: 3rem 2rem;">
              <div style="font-size: 4rem; margin-bottom: 1rem;">üèÜ</div>
              <h3 style="font-size: 1.5rem; font-weight: 900; color: var(--gray-900); margin-bottom: 0.5rem;">Nobel Council</h3>
              <p style="color: var(--gray-500); margin-bottom: 1.5rem;">Consult laureate-inspired lenses for structured, educational insights</p>
              <button class="btn btn-accent" onclick="showTab('nobel-council'); event.stopPropagation();">
                <span aria-hidden="true">‚ö°</span> Start Consultation (+50 XP)
              </button>
              <p style="margin-top: 0.9rem; color: var(--gray-500); font-size: 0.82rem;">Not affiliated with, endorsed by, or representing the Nobel Prize institutions.</p>
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              <h3 class="card-title">üìä Your Progress</h3>
            </div>
            <div class="card-body">
              <div style="display: flex; gap: 1rem; margin-bottom: 1rem;">
                <div style="flex: 1; text-align: center; padding: 1rem; background: var(--gray-50); border-radius: var(--radius-md); border: 1px solid var(--gray-200);">
                  <div style="font-size: 1.5rem; font-weight: 900; color: var(--primary-600);">12</div>
                  <div style="font-size: 0.8rem; color: var(--gray-500);">Consultations</div>
                </div>
                <div style="flex: 1; text-align: center; padding: 1rem; background: var(--gray-50); border-radius: var(--radius-md); border: 1px solid var(--gray-200);">
                  <div style="font-size: 1.5rem; font-weight: 900; color: var(--accent-500);">8</div>
                  <div style="font-size: 0.8rem; color: var(--gray-500);">Domains Explored</div>
                </div>
                <div style="flex: 1; text-align: center; padding: 1rem; background: var(--gray-50); border-radius: var(--radius-md); border: 1px solid var(--gray-200);">
                  <div style="font-size: 1.5rem; font-weight: 900; color: var(--secondary-500);">4</div>
                  <div style="font-size: 0.8rem; color: var(--gray-500);">Insights Saved</div>
                </div>
              </div>
              <div class="alert alert-warning" style="margin: 0;">
                <span class="alert-icon">‚ö†Ô∏è</span>
                <div>
                  <strong>Reminder:</strong> Nobel Council outputs are subjective interpretations for educational use. Please review the disclaimer before applying anything in real-world contexts.
                </div>
              </div>
            </div>
          </div>
        </div>

        <footer class="app-footer">
          <div>¬© <span id="year"></span> PharmPath. Educational use only.</div>
          <div class="footer-links">
            <button type="button" onclick="openDisclaimer()">Disclaimer</button>
            <button type="button" onclick="openDisclaimer(true)">Nobel Council disclaimer</button>
          </div>
        </footer>
      </div>

      <!-- Nobel Council Tab -->
      <div class="tab-content" id="nobel-council-tab">
        <div class="top-bar">
          <div>
            <h1 class="page-title">Nobel Council</h1>
            <p class="page-subtitle">Laureate-inspired lenses for educational reasoning and structured ideation</p>
          </div>
          <div class="top-actions">
            <div class="search-pill" title="Search laureates">
              <span aria-hidden="true">üîé</span>
              <input id="nobel-search-pill" type="text" placeholder="Search laureates‚Ä¶" oninput="document.getElementById('laureate-search').value=this.value; filterLaureates(); syncGlobalSearch(this.value);" />
            </div>
            <button class="btn btn-secondary" onclick="openDisclaimer(true)"><span aria-hidden="true">‚öñÔ∏è</span> Disclaimer</button>
          </div>
        </div>

        <div class="council-hero">
          <div class="council-hero-content">
            <h1>üèÜ The Nobel Council</h1>
            <p>Consult over 300 Nobel Laureates across Physics, Chemistry, Medicine, and Economics. Apply their theoretical frameworks to your research questions and career challenges‚Äîstrictly as educational interpretation.</p>
            <div class="council-stats">
              <div class="council-stat">
                <div class="council-stat-value" id="laureate-count">324</div>
                <div class="council-stat-label">Laureates</div>
              </div>
              <div class="council-stat">
                <div class="council-stat-value">4</div>
                <div class="council-stat-label">Domains</div>
              </div>
              <div class="council-stat">
                <div class="council-stat-value">125+</div>
                <div class="council-stat-label">Years of Discovery</div>
              </div>
            </div>
          </div>
        </div>

        <!-- NEW: Inline, always-visible disclaimer banner -->
        <div class="disclaimer-banner" role="note" aria-label="Nobel Council disclaimer">
          <div class="disclaimer-icon" aria-hidden="true">‚ö†Ô∏è</div>
          <div class="disclaimer-text">
            <strong>Disclaimer (Educational Use):</strong> Nobel Council outputs are subjective interpretations derived from publicly available Nobel Laureate speeches/lectures and related materials. They <strong>do not</strong> reflect the ideas, values, opinions, or endorsements of any laureate, the Nobel Prize institutions, or the Nobel Committee. Use at your own risk; to the maximum extent permitted by law, PharmPath disclaims liability for any loss or damage.
          </div>
          <button class="btn btn-secondary btn-sm" onclick="openDisclaimer(true)">Read full</button>
        </div>

        <div class="laureate-browser">
          <!-- Laureate Sidebar -->
          <div class="laureate-sidebar">
            <div class="laureate-search">
              <input type="text" placeholder="Search laureates..." id="laureate-search" oninput="filterLaureates()">
            </div>
            <div class="domain-tabs">
              <button class="domain-tab active" onclick="filterByDomain('all', this)">All</button>
              <button class="domain-tab" onclick="filterByDomain('Physics', this)">Physics</button>
              <button class="domain-tab" onclick="filterByDomain('Chemistry', this)">Chem</button>
              <button class="domain-tab" onclick="filterByDomain('Medicine', this)">Med</button>
              <button class="domain-tab" onclick="filterByDomain('Economics', this)">Econ</button>
            </div>
            <div class="laureate-list" id="laureate-list">
              <!-- Populated by JavaScript -->
            </div>
          </div>

          <!-- Insight Panel -->
          <div class="insight-panel">
            <div class="insight-header" id="insight-header">
              <div class="insight-laureate">
                <div class="insight-avatar" id="laureate-avatar">?</div>
                <div>
                  <div class="insight-name" id="laureate-name">Select a Laureate</div>
                  <div class="insight-meta" id="laureate-meta">Browse the list to begin</div>
                  <div class="insight-domain-badge physics" id="laureate-domain-badge" style="display:none;">Physics</div>
                </div>
              </div>
            </div>

            <div class="insight-body" id="insight-body">
              <div class="alert alert-info">
                <span class="alert-icon">üí°</span>
                <div>
                  Select a laureate to view a brief discovery summary and key concepts. Use ‚ÄúGenerate Insight‚Äù for a laureate-inspired educational interpretation. For transparency, review the disclaimer.
                </div>
              </div>

              <div class="insight-section" id="discovery-section" style="display:none;">
                <h4>Discovery & Significance</h4>
                <div class="discovery-card">
                  <h5 id="discovery-title">-</h5>
                  <p id="discovery-significance">-</p>
                </div>
              </div>

              <div class="insight-section" id="keywords-section" style="display:none;">
                <h4>Key Concepts</h4>
                <div class="keywords-list" id="keywords-list"></div>
              </div>

              <div class="consultation-card" id="consultation-card" style="display:none;">
                <h4>‚ö° Consult This Laureate (Educational)</h4>
                <p style="color: var(--gray-600); font-size: 0.9rem; margin-bottom: 1rem;">
                  Describe your question. The output is a subjective interpretation using a ‚Äútheoretical lens‚Äù metaphor and does not represent the laureate‚Äôs views.
                </p>
                <div class="form-group">
                  <label class="form-label">Your Problem / Question</label>
                  <textarea class="form-textarea" id="problem-input" rows="4" placeholder="Example: How can I predict which pathway nodes will respond to targeted inhibition?"></textarea>
                </div>
                <button class="btn btn-accent btn-lg" onclick="consultLaureate()" style="width: 100%;">
                  <span aria-hidden="true">üîÆ</span> Generate Insight (+50 XP)
                </button>
                <p style="margin-top: 0.75rem; font-size: 0.82rem; color: var(--gray-600);">
                  By proceeding, you acknowledge the disclaimer and agree to use outputs at your own risk.
                </p>
              </div>

              <!-- Results Section -->
              <div id="insight-results" style="display:none;">
                <div class="analysis-pipeline" aria-label="analysis pipeline">
                  <div class="pipeline-step active">
                    <div class="pipeline-icon">üîç</div>
                    <div class="pipeline-label">Input Parsing</div>
                    <div class="pipeline-sublabel">Semantic Analysis</div>
                  </div>
                  <div class="pipeline-step active">
                    <div class="pipeline-icon">üî¨</div>
                    <div class="pipeline-label">Theoretical Lens</div>
                    <div class="pipeline-sublabel" id="pipeline-lens">-</div>
                  </div>
                  <div class="pipeline-step active">
                    <div class="pipeline-icon">‚àë</div>
                    <div class="pipeline-label">Formalism</div>
                    <div class="pipeline-sublabel">Math Model</div>
                  </div>
                  <div class="pipeline-step active">
                    <div class="pipeline-icon">‚úì</div>
                    <div class="pipeline-label">Strategic Output</div>
                    <div class="pipeline-sublabel">Actionable Advice</div>
                  </div>
                </div>

                <div class="insight-result">
                  <div class="insight-result-header">
                    <h3>üéØ Council Verdict: <span id="result-laureate-name">-</span></h3>
                  </div>
                  <div class="insight-result-body">
                    <h4 style="font-size: 0.9rem; font-weight: 900; color: var(--gray-700); margin-bottom: 0.75rem;">Primary Insight</h4>
                    <div class="insight-box" id="result-insight">-</div>

                    <div class="strategy-box">
                      <h5>üéØ Strategic Recommendation</h5>
                      <p id="result-strategy">-</p>
                    </div>

                    <h4 style="font-size: 0.9rem; font-weight: 900; color: var(--gray-700); margin: 1.5rem 0 0.75rem;">Mathematical Formalism</h4>
                    <div class="math-display" id="result-math">-</div>

                    <h4 style="font-size: 0.9rem; font-weight: 900; color: var(--gray-700); margin-bottom: 0.75rem;">Computed Metrics</h4>
                    <div class="metrics-grid" id="result-metrics"></div>

                    <h4 style="font-size: 0.9rem; font-weight: 900; color: var(--gray-700); margin: 1.5rem 0 0.75rem;">Visual Analysis</h4>
                    <div class="chart-container" id="result-chart"></div>

                    <h4 style="font-size: 0.9rem; font-weight: 900; color: var(--gray-700); margin: 1.5rem 0 0.75rem;">Applied Answer</h4>
                    <div style="background: var(--gray-50); padding: 1.25rem; border-radius: var(--radius-md); border: 1px solid var(--gray-200); font-family: 'Crimson Pro', serif; font-size: 1rem; line-height: 1.8; color: var(--gray-700);" id="result-answer">-</div>
                  </div>
                </div>
              </div>

              <footer class="app-footer">
                <div>¬© <span class="year"></span> PharmPath. Not affiliated with or endorsed by Nobel Prize institutions.</div>
                <div class="footer-links">
                  <button type="button" onclick="openDisclaimer(true)">Disclaimer</button>
                </div>
              </footer>
            </div>
          </div>
        </div>
      </div>

      <!-- Career Path Tab (placeholder) -->
      <div class="tab-content" id="career-path-tab">
        <div class="top-bar">
          <div>
            <h1 class="page-title">Career Path üó∫Ô∏è</h1>
            <p class="page-subtitle">Configure your pharmacy career journey</p>
          </div>
        </div>
        <div class="card">
          <div class="card-body" style="text-align:center; padding: 4rem 2rem;">
            <div style="font-size: 4rem; margin-bottom: 1rem;">üöÄ</div>
            <h3 style="font-size: 1.5rem; font-weight: 900; margin-bottom: 0.5rem;">Coming Soon</h3>
            <p style="color: var(--gray-500);">Full career path configuration with timeline visualization</p>
          </div>
        </div>
        <footer class="app-footer">
          <div>¬© <span class="year"></span> PharmPath.</div>
          <div class="footer-links"><button type="button" onclick="openDisclaimer()">Disclaimer</button></div>
        </footer>
      </div>

      <!-- Portfolio Tab (placeholder) -->
      <div class="tab-content" id="portfolio-tab">
        <div class="top-bar">
          <div>
            <h1 class="page-title">Portfolio üìÑ</h1>
            <p class="page-subtitle">Build your proof-of-work portfolio</p>
          </div>
        </div>
        <div class="card">
          <div class="card-body" style="text-align:center; padding: 4rem 2rem;">
            <div style="font-size: 4rem; margin-bottom: 1rem;">üìã</div>
            <h3 style="font-size: 1.5rem; font-weight: 900; margin-bottom: 0.5rem;">Coming Soon</h3>
            <p style="color: var(--gray-500);">Disease-state dossiers, executive briefs, and KOL strategy plans</p>
          </div>
        </div>
        <footer class="app-footer">
          <div>¬© <span class="year"></span> PharmPath.</div>
          <div class="footer-links"><button type="button" onclick="openDisclaimer()">Disclaimer</button></div>
        </footer>
      </div>

      <!-- Network Tab (placeholder) -->
      <div class="tab-content" id="network-tab">
        <div class="top-bar">
          <div>
            <h1 class="page-title">Network üë•</h1>
            <p class="page-subtitle">Build your professional network</p>
          </div>
        </div>
        <div class="card">
          <div class="card-body" style="text-align:center; padding: 4rem 2rem;">
            <div style="font-size: 4rem; margin-bottom: 1rem;">ü§ù</div>
            <h3 style="font-size: 1.5rem; font-weight: 900; margin-bottom: 0.5rem;">Coming Soon</h3>
            <p style="color: var(--gray-500);">KOL mapping, networking tracker, and contact management</p>
          </div>
        </div>
        <footer class="app-footer">
          <div>¬© <span class="year"></span> PharmPath.</div>
          <div class="footer-links"><button type="button" onclick="openDisclaimer()">Disclaimer</button></div>
        </footer>
      </div>
    </main>
  </div>

  <!-- Loading Overlay -->
  <div class="loading-overlay" id="loading-overlay" aria-hidden="true">
    <div class="loading-spinner" aria-label="Loading"></div>
  </div>

  <!-- Toast Container -->
  <div class="toast-container" id="toast-container" aria-live="polite" aria-atomic="true"></div>

  <!-- NEW: Disclaimer Modal -->
  <div class="modal-backdrop" id="disclaimer-modal" role="dialog" aria-modal="true" aria-labelledby="disclaimer-title">
    <div class="modal">
      <div class="modal-header">
        <div>
          <div class="modal-title" id="disclaimer-title">Disclaimer & Attribution</div>
          <div style="margin-top:0.25rem; color: var(--gray-500); font-size: 0.85rem;">Please read before using Nobel Council outputs.</div>
        </div>
        <button class="btn btn-secondary btn-sm" onclick="closeDisclaimer()" aria-label="Close">‚úï</button>
      </div>
      <div class="modal-body">
        <p><strong>Subjective interpretation.</strong> The Nobel Council feature provides <strong>subjective interpretations</strong> of themes and reasoning patterns derived from <strong>publicly available Nobel Laureate speeches, lectures, and related materials</strong>. These interpretations are generated for <strong>educational and informational purposes only</strong>.</p>

        <p><strong>No affiliation or endorsement.</strong> These outputs <strong>do not represent</strong>, and should not be attributed to, the ideas, values, opinions, or endorsements of any Nobel Laureate, the Nobel Prize institutions, or the Nobel Committee. PharmPath is <strong>not affiliated with</strong> or endorsed by Nobel Prize institutions.</p>

        <p><strong>No advice; use at your own risk.</strong> Outputs are not medical, legal, financial, academic, or professional advice. You are responsible for verifying any information and for decisions made based on the outputs.</p>

        <p><strong>Limitation of liability.</strong> To the maximum extent permitted by law, PharmPath and its contributors <strong>disclaim any and all liability</strong> for any direct, indirect, incidental, consequential, special, exemplary, or punitive damages, or any other loss or harm, <strong>in any way</strong> arising from or related to use of this website and its outputs.</p>

        <p><strong>Practical guidance:</strong></p>
        <ul>
          <li>Use Nobel Council insights as a starting point for structured thinking, not as authority.</li>
          <li>When making real-world decisions, consult qualified professionals and primary sources.</li>
          <li>For scientific topics, validate against peer-reviewed literature and domain guidelines.</li>
        </ul>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" onclick="closeDisclaimer()">Close</button>
        <button class="btn btn-primary" onclick="acceptDisclaimer()">I Understand</button>
      </div>
    </div>
  </div>

  <script>
    // ============================================
    // NOTE: Keep your existing NobelDatabase here.
    // This file includes a small sample so the UI works.
    // Replace SAMPLE_NOBEL_DATABASE with your full NobelDatabase object.
    // ============================================

    const SAMPLE_NOBEL_DATABASE = {
      Physics: [
        { name: "Albert Einstein", year: 1921, discovery: "Photoelectric effect", significance: "Foundation of quantum theory", keywords: ["photon","photoelectric"], framework: "relativistic" },
        { name: "Richard Feynman", year: 1965, discovery: "Quantum electrodynamics", significance: "Light‚Äìmatter interactions", keywords: ["QED","path integrals"], framework: "path_integral" }
      ],
      Chemistry: [
        { name: "Linus Pauling", year: 1954, discovery: "Nature of the chemical bond", significance: "Bonding + electronegativity", keywords: ["bond","electronegativity"], framework: "bonding" },
        { name: "K. Barry Sharpless", year: 2022, discovery: "Click chemistry", significance: "Reliable modular reactions", keywords: ["click","bioorthogonal"], framework: "click" }
      ],
      Medicine: [
        { name: "James Allison", year: 2018, discovery: "CTLA-4 checkpoint blockade", significance: "Cancer immunotherapy", keywords: ["CTLA-4","checkpoint"], framework: "checkpoint" },
        { name: "Katalin Karik√≥", year: 2023, discovery: "mRNA modifications", significance: "Enabled therapeutic mRNA", keywords: ["mRNA","pseudouridine"], framework: "therapeutic" }
      ],
      Economics: [
        { name: "Daniel Kahneman", year: 2002, discovery: "Prospect theory", significance: "Predictable biases", keywords: ["loss aversion","heuristics"], framework: "behavioral" },
        { name: "John Nash", year: 1994, discovery: "Nash equilibrium", significance: "Stable strategic outcomes", keywords: ["equilibrium","game theory"], framework: "game_theory" }
      ]
    };

    // Replace this assignment with your full NobelDatabase if you already have it in the file.
    const NobelDatabase = (typeof window.NobelDatabase === 'object' && window.NobelDatabase) ? window.NobelDatabase : SAMPLE_NOBEL_DATABASE;

    // ============================================
    // DETERMINISTIC KERNEL
    // ============================================
    class DeterministicKernel {
      constructor(seedStr) { this.seedInt = this._hashString(seedStr); }
      _hashString(str) {
        let hash = 0;
        for (let i = 0; i < str.length; i++) {
          hash = ((hash << 5) - hash) + str.charCodeAt(i);
          hash |= 0;
        }
        return Math.abs(hash);
      }
      random() {
        let t = this.seedInt += 0x6D2B79F5;
        t = Math.imul(t ^ (t >>> 15), t | 1);
        t ^= t + Math.imul(t ^ (t >>> 7), t | 61);
        return ((t ^ (t >>> 14)) >>> 0) / 4294967296;
      }
      randomRange(min, max) { return min + this.random() * (max - min); }
      pick(array) { return array[Math.floor(this.random() * array.length)]; }
    }

    // ============================================
    // Simple toast utility
    // ============================================
    function toast(title, message) {
      const container = document.getElementById('toast-container');
      const el = document.createElement('div');
      el.className = 'toast';
      el.innerHTML = `
        <div class="toast-icon xp" aria-hidden="true">‚≠ê</div>
        <div class="toast-content">
          <h4>${escapeHtml(title)}</h4>
          <p>${escapeHtml(message)}</p>
        </div>
      `;
      container.appendChild(el);
      setTimeout(() => el.remove(), 3200);
    }

    function escapeHtml(str) {
      return String(str)
        .replace(/&/g, '&amp;')
        .replace(/</g, '&lt;')
        .replace(/>/g, '&gt;')
        .replace(/"/g, '&quot;')
        .replace(/'/g, '&#039;');
    }

    // ============================================
    // Tab navigation
    // ============================================
    function showTab(tabName) {
      // Hide all
      document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
      // Show target
      const el = document.getElementById(`${tabName}-tab`);
      if (el) el.classList.add('active');

      // Nav active states
      document.querySelectorAll('.nav-item').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.tab === tabName);
      });

      // Close sidebar on mobile
      closeSidebar();

      // Optional: if user navigates to Nobel Council, sync search
      if (tabName === 'nobel-council') {
        const globalVal = (document.getElementById('global-search')?.value || '').trim();
        if (globalVal) {
          const ls = document.getElementById('laureate-search');
          if (ls) { ls.value = globalVal; filterLaureates(); }
        }
      }

      // Move focus for a11y
      const main = document.getElementById('main');
      if (main) main.focus();
    }

    function toggleSidebar() {
      document.body.classList.toggle('sidebar-open');
    }
    function closeSidebar() { document.body.classList.remove('sidebar-open'); }

    function syncGlobalSearch(value) {
      const v = String(value || '');
      const pill = document.getElementById('nobel-search-pill');
      if (pill && pill.value !== v) pill.value = v;
      const ls = document.getElementById('laureate-search');
      if (ls && ls.value !== v) { ls.value = v; filterLaureates(); }
    }

    // ============================================
    // Disclaimer modal + gating
    // ============================================
    const DISCLAIMER_KEY = 'pharmpath_disclaimer_accepted_v1';

    function openDisclaimer(nobelSpecific = false) {
      const modal = document.getElementById('disclaimer-modal');
      modal.classList.add('active');
      // If opened from Nobel Council, we keep content the same, but you can customize if you want
      // (e.g., add a parameterized heading)
      if (nobelSpecific) {
        document.getElementById('disclaimer-title').textContent = 'Nobel Council Disclaimer';
      } else {
        document.getElementById('disclaimer-title').textContent = 'Disclaimer & Attribution';
      }
    }

    function closeDisclaimer() {
      const modal = document.getElementById('disclaimer-modal');
      modal.classList.remove('active');
    }

    function acceptDisclaimer() {
      try { localStorage.setItem(DISCLAIMER_KEY, 'true'); } catch (e) {}
      closeDisclaimer();
      toast('Disclaimer acknowledged', 'You can continue using Nobel Council features.');
    }

    function isDisclaimerAccepted() {
      try { return localStorage.getItem(DISCLAIMER_KEY) === 'true'; } catch (e) { return false; }
    }

    // ============================================
    // Laureate list + selection
    // ============================================
    let currentDomain = 'all';
    let currentLaureate = null;

    function flattenLaureates() {
      const domains = Object.keys(NobelDatabase);
      const all = [];
      domains.forEach(d => {
        (NobelDatabase[d] || []).forEach(item => all.push({ ...item, domain: d }));
      });
      return all;
    }

    function renderLaureateList(items) {
      const list = document.getElementById('laureate-list');
      if (!list) return;
      list.innerHTML = '';
      if (!items.length) {
        const empty = document.createElement('div');
        empty.className = 'alert alert-warning';
        empty.style.margin = '0.75rem';
        empty.innerHTML = `<span class="alert-icon">üîé</span><div><strong>No matches.</strong> Try a different search term or domain filter.</div>`;
        list.appendChild(empty);
        return;
      }

      items.forEach((l, idx) => {
        const el = document.createElement('div');
        el.className = 'laureate-item' + ((currentLaureate && currentLaureate.name === l.name && currentLaureate.year === l.year) ? ' selected' : '');
        el.setAttribute('role', 'button');
        el.tabIndex = 0;
        el.onclick = () => selectLaureate(l);
        el.onkeydown = (e) => { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); selectLaureate(l); } };
        el.innerHTML = `
          <div class="laureate-item-name">${escapeHtml(l.name)}</div>
          <div class="laureate-item-year">${escapeHtml(l.domain)} ‚Ä¢ ${escapeHtml(l.year)}</div>
          <div class="laureate-item-discovery">${escapeHtml(l.discovery)}</div>
        `;
        list.appendChild(el);
      });

      // Update count
      const count = document.getElementById('laureate-count');
      if (count) count.textContent = String(flattenLaureates().length);
    }

    function filterByDomain(domain, btn) {
      currentDomain = domain;
      document.querySelectorAll('.domain-tab').forEach(b => b.classList.remove('active'));
      if (btn) btn.classList.add('active');
      filterLaureates();
    }

    function filterLaureates() {
      const q = (document.getElementById('laureate-search')?.value || '').trim().toLowerCase();
      const all = flattenLaureates();
      const filtered = all.filter(l => {
        const domainOK = (currentDomain === 'all') ? true : (l.domain === currentDomain);
        if (!domainOK) return false;
        if (!q) return true;
        const hay = `${l.name} ${l.discovery} ${l.significance} ${(l.keywords||[]).join(' ')}`.toLowerCase();
        return hay.includes(q);
      });
      renderLaureateList(filtered);
    }

    function selectLaureate(l) {
      currentLaureate = l;

      document.getElementById('laureate-avatar').textContent = (l.name || '?').split(' ').map(s => s[0]).slice(0,2).join('').toUpperCase();
      document.getElementById('laureate-name').textContent = l.name;
      document.getElementById('laureate-meta').textContent = `${l.domain} ‚Ä¢ ${l.year}`;

      const badge = document.getElementById('laureate-domain-badge');
      badge.style.display = 'inline-block';
      badge.textContent = l.domain;
      badge.className = 'insight-domain-badge ' + (l.domain === 'Physics' ? 'physics' : l.domain === 'Chemistry' ? 'chemistry' : l.domain === 'Medicine' ? 'medicine' : 'economics');

      document.getElementById('discovery-section').style.display = 'block';
      document.getElementById('discovery-title').textContent = l.discovery;
      document.getElementById('discovery-significance').textContent = l.significance;

      document.getElementById('keywords-section').style.display = 'block';
      const kw = document.getElementById('keywords-list');
      kw.innerHTML = '';
      (l.keywords || []).forEach(k => {
        const tag = document.createElement('span');
        tag.className = 'keyword-tag';
        tag.textContent = k;
        kw.appendChild(tag);
      });

      document.getElementById('consultation-card').style.display = 'block';
      document.getElementById('insight-results').style.display = 'none';

      filterLaureates(); // rerender to highlight selection
    }

    // ============================================
    // Insight generation (sample; keep/replace with your existing generators)
    // ============================================
    const InsightGenerators = {
      behavioral: (k, laureate, problem) => ({
        insight: `${laureate.name}'s behavioral lens emphasizes predictable heuristics and loss aversion. Reframe the problem in terms of avoiding losses and reducing friction for the desired action.`,
        math: `V(x)=x^Œ± (gains), -Œª(-x)^Œ≤ (losses), Œª>1`,
        strategy: `Design defaults, simplify the next action, and structure incentives around loss aversion. Validate with small A/B tests.`
      }),
      game_theory: (k, laureate, problem) => ({
        insight: `${laureate.name}'s game-theoretic lens asks: who are the strategic agents, what are the payoffs, and where is equilibrium? Stable outcomes often require changing incentives or credible commitments.`,
        math: `‚àÄi: u_i(s_i*, s_-i*) ‚â• u_i(s_i, s_-i*)`,
        strategy: `Map stakeholders, define payoff matrices, and look for dominant strategies. Use commitments to shift equilibrium.`
      }),
      path_integral: (k, laureate, problem) => ({
        insight: `${laureate.name}'s path-integral framing suggests exploring multiple trajectories rather than prematurely committing to a single plan. The best approach may combine several paths.`,
        math: `K(b,a)=‚à´ e^{(i/ƒß)S[x(t)]} Dx(t)`,
        strategy: `Generate 5‚Äì10 plausible pathways, test the cheapest constraints first, then allocate resources to the paths with strongest signal.`
      }),
      relativistic: (k, laureate, problem) => ({
        insight: `${laureate.name}'s relativistic framing highlights that ‚Äútruths‚Äù can differ by reference frame. Seek invariants that remain stable across stakeholders and contexts.`,
        math: `ds¬≤=g_{ŒºŒΩ}dx^Œºdx^ŒΩ`,
        strategy: `Identify invariants (core metrics), reconcile stakeholder frames, then choose interventions that preserve those invariants.`
      }),
      default: (k, laureate, problem) => ({
        insight: `Using ${laureate.name}'s discovery as a metaphor, focus on the smallest measurable unit in your system and test it directly. Reduce the question to an observable hypothesis.`,
        math: `Œî = f(parameters)`,
        strategy: `Form a falsifiable hypothesis, define success criteria, run a minimal experiment, and iterate.`
      })
    };

    function computeMetrics(k) {
      return {
        "Confidence": (k.randomRange(55, 85)).toFixed(1) + "%",
        "Novelty": (k.randomRange(30, 90)).toFixed(1) + "%",
        "Actionability": (k.randomRange(40, 92)).toFixed(1) + "%"
      };
    }

    function renderMetrics(metrics) {
      const grid = document.getElementById('result-metrics');
      grid.innerHTML = '';
      Object.entries(metrics).forEach(([label, value]) => {
        const card = document.createElement('div');
        card.className = 'metric-card';
        card.innerHTML = `<div class="metric-value">${escapeHtml(value)}</div><div class="metric-label">${escapeHtml(label)}</div>`;
        grid.appendChild(card);
      });
    }

    function renderChart(metrics) {
      const el = document.getElementById('result-chart');
      const labels = Object.keys(metrics);
      const values = labels.map(k => parseFloat(String(metrics[k]).replace('%','')));

      const data = [{
        type: 'bar',
        x: labels,
        y: values
      }];

      const layout = {
        margin: { l: 30, r: 20, t: 10, b: 40 },
        paper_bgcolor: 'rgba(0,0,0,0)',
        plot_bgcolor: 'rgba(0,0,0,0)'
      };

      Plotly.newPlot(el, data, layout, { displayModeBar: false, responsive: true });
    }

    async function consultLaureate() {
      if (!currentLaureate) {
        toast('Select a laureate', 'Choose a laureate from the list first.');
        return;
      }

      // Gate consult behind disclaimer acknowledgement (non-blocking to browse)
      if (!isDisclaimerAccepted()) {
        openDisclaimer(true);
        toast('Disclaimer required', 'Please acknowledge the disclaimer to generate insights.');
        return;
      }

      const problem = (document.getElementById('problem-input')?.value || '').trim();
      if (!problem) {
        toast('Add your question', 'Describe your problem or question to generate an insight.');
        return;
      }

      // Deterministic seed based on laureate + problem
      const kernel = new DeterministicKernel(`${currentLaureate.name}|${currentLaureate.year}|${problem}`);

      // Choose generator
      const fw = currentLaureate.framework || 'default';
      const gen = InsightGenerators[fw] || InsightGenerators.default;
      const out = gen(kernel, currentLaureate, problem);

      // Populate results
      document.getElementById('pipeline-lens').textContent = fw.replaceAll('_',' ');
      document.getElementById('result-laureate-name').textContent = currentLaureate.name;
      document.getElementById('result-insight').textContent = out.insight;
      document.getElementById('result-strategy').textContent = out.strategy;
      document.getElementById('result-math').textContent = out.math;
      document.getElementById('result-answer').textContent = `Applied interpretation: ${out.insight}\n\nNext steps: ${out.strategy}`;

      const metrics = computeMetrics(kernel);
      renderMetrics(metrics);
      renderChart(metrics);

      document.getElementById('insight-results').style.display = 'block';

      // Reward UX (demo)
      toast('Insight generated', '+50 XP (demo)');
    }

    // ============================================
    // Init
    // ============================================
    (function init() {
      // Year
      const y = new Date().getFullYear();
      const yEl = document.getElementById('year');
      if (yEl) yEl.textContent = y;
      document.querySelectorAll('.year').forEach(el => el.textContent = y);

      // Render initial laureate list (Nobel tab)
      renderLaureateList(flattenLaureates());

      // If you want to prompt disclaimer on first load, uncomment:
      // if (!isDisclaimerAccepted()) openDisclaimer(true);
        <!-- =========================
UI + DISCLAIMER PATCH (drop-in)
Integrate the snippets below into your existing file.
They are designed to be additive and not break your current layout.
========================= -->

<!-- 1) ADD THESE CSS RULES near the END of your <style> block -->
<style>
  /* ===== A11Y + POLISH ===== */
  :focus-visible { outline: 3px solid rgba(20,184,166,.45); outline-offset: 3px; }
  .skip-link{
    position:absolute; left:-999px; top:10px; z-index:2000;
    background:#fff; border:2px solid var(--gray-200);
    padding:.6rem .9rem; border-radius: var(--radius-md);
    box-shadow: var(--shadow-lg); color: var(--gray-900);
  }
  .skip-link:focus{ left:10px; }
  .main-content{ min-width:0; overflow-x:hidden; }

  /* Subtle scrollbar styling (non-blocking) */
  .nav-section::-webkit-scrollbar,
  .laureate-list::-webkit-scrollbar { width: 10px; }
  .nav-section::-webkit-scrollbar-thumb,
  .laureate-list::-webkit-scrollbar-thumb {
    background: rgba(113,113,122,.25);
    border-radius: 9999px;
    border: 3px solid transparent;
    background-clip: content-box;
  }

  /* ===== MOBILE HEADER + SIDEBAR TOGGLE ===== */
  .global-topbar{
    display:none;
    position: sticky; top: 0; z-index: 150;
    background: rgba(250,250,250,.85);
    backdrop-filter: blur(10px);
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-lg);
    padding: .75rem .85rem;
    margin-bottom: 1rem;
    box-shadow: var(--shadow-sm);
  }
  .global-topbar-inner{
    display:flex; align-items:center; justify-content:space-between; gap:.75rem;
  }
  .icon-btn{
    width: 42px; height: 42px;
    border-radius: var(--radius-md);
    border: 1px solid var(--gray-200);
    background: white;
    display:flex; align-items:center; justify-content:center;
    cursor:pointer;
    transition: transform var(--transition-fast), box-shadow var(--transition-fast);
    box-shadow: var(--shadow-sm);
  }
  .icon-btn:hover{ transform: translateY(-1px); box-shadow: var(--shadow-md); }
  .global-title{
    display:flex; flex-direction:column; line-height:1.15;
  }
  .global-title .app{
    font-weight: 800; letter-spacing: -0.02em; color: var(--gray-900);
  }
  .global-title .context{
    font-size: .8rem; color: var(--gray-500);
    white-space: nowrap; overflow:hidden; text-overflow: ellipsis; max-width: 46vw;
  }

  .sidebar-backdrop{
    display:none;
    position: fixed; inset: 0;
    background: rgba(0,0,0,.35);
    backdrop-filter: blur(2px);
    z-index: 90;
  }
  body.sidebar-open .sidebar-backdrop{ display:block; }
  body.sidebar-open .sidebar{ transform: translateX(0); }

  /* Improve the existing mobile behavior: when hidden, keep it off-canvas */
  @media (max-width: 768px){
    .global-topbar{ display:block; }
    .sidebar{ transition: transform var(--transition-slow); }
    .sidebar{ transform: translateX(-100%); }
  }

  /* ===== DISCLAIMER BANNER ===== */
  .disclaimer-banner{
    margin: 1rem 0 1.25rem;
    padding: 1rem 1.1rem;
    border-radius: var(--radius-lg);
    border: 1px solid rgba(245,158,11,.25);
    background: linear-gradient(135deg, rgba(245,158,11,.10), rgba(139,92,246,.06));
    display:flex; gap:.75rem; align-items:flex-start;
  }
  .disclaimer-banner .badge{
    flex-shrink:0;
    width: 38px; height: 38px;
    border-radius: 9999px;
    display:flex; align-items:center; justify-content:center;
    background: rgba(245,158,11,.18);
    border: 1px solid rgba(245,158,11,.25);
  }
  .disclaimer-banner strong{ color: var(--gray-900); }
  .disclaimer-banner p{ margin-top:.25rem; color: var(--gray-700); font-size: .92rem; }
  .disclaimer-banner .actions{
    margin-left:auto; display:flex; gap:.5rem; flex-wrap:wrap; align-items:center;
  }

  /* ===== DISCLAIMER MODAL ===== */
  .modal-overlay{
    display:none;
    position: fixed; inset: 0; z-index: 2000;
    background: rgba(0,0,0,.5);
    backdrop-filter: blur(4px);
    padding: 1.5rem;
  }
  .modal-overlay.active{ display:flex; align-items:center; justify-content:center; }

  .modal{
    width: min(860px, 100%);
    background: white;
    border-radius: var(--radius-xl);
    border: 1px solid var(--gray-200);
    box-shadow: var(--shadow-xl);
    overflow:hidden;
  }
  .modal-header{
    padding: 1.1rem 1.25rem;
    background: linear-gradient(135deg, var(--gray-50), white);
    border-bottom: 1px solid var(--gray-100);
    display:flex; align-items:center; justify-content:space-between; gap:.75rem;
  }
  .modal-title{
    font-weight: 800; color: var(--gray-900);
    letter-spacing: -0.02em;
    display:flex; align-items:center; gap:.5rem;
  }
  .modal-body{
    padding: 1.25rem;
    color: var(--gray-700);
    line-height: 1.75;
  }
  .modal-body ul{ margin: .75rem 0 0 1.2rem; }
  .modal-body li{ margin: .35rem 0; }
  .modal-footer{
    padding: 1rem 1.25rem;
    border-top: 1px solid var(--gray-100);
    display:flex; justify-content:flex-end; gap:.75rem; flex-wrap:wrap;
    background: white;
  }
  .legal-micro{
    margin-top: .75rem;
    font-size: .85rem;
    color: var(--gray-500);
  }
</style>

<!-- 2) ADD THIS SKIP LINK immediately AFTER <body> -->
<a class="skip-link" href="#main">Skip to content</a>

<!-- 3) ADD THIS BACKDROP just AFTER </aside> (right after your sidebar closes) -->
<div class="sidebar-backdrop" id="sidebar-backdrop" onclick="closeSidebar()" aria-hidden="true"></div>

<!-- 4) ADD THIS MOBILE TOP BAR as the FIRST CHILD inside <main class="main-content"> -->
<header class="global-topbar" aria-label="App header">
  <div class="global-topbar-inner">
    <button class="icon-btn" id="sidebar-toggle" type="button" aria-label="Open navigation" aria-controls="sidebar" aria-expanded="false">
      ‚ò∞
    </button>
    <div class="global-title">
      <div class="app">PharmPath</div>
      <div class="context" id="global-context">Dashboard</div>
    </div>
    <button class="btn btn-secondary btn-sm" type="button" onclick="openDisclaimerModal()">
      Disclaimer
    </button>
  </div>
</header>

<!-- 5) ADD id="main" to your <main> tag for the skip link -->
<!-- <main class="main-content" id="main"> -->

<!-- 6) ADD THIS DISCLAIMER BANNER inside the NOBEL COUNCIL tab, right AFTER the .council-hero -->
<div class="disclaimer-banner" role="note" aria-label="Disclaimer summary">
  <div class="badge">‚öñÔ∏è</div>
  <div>
    <strong>Educational disclaimer.</strong>
    <p>
      ‚ÄúNobel Council‚Äù insights are subjective interpretations derived from publicly available laureate speeches and related materials.
      They do not reflect the ideas, values, or opinions of any laureate, nor the Nobel Committee or Nobel Foundation, and imply no affiliation.
    </p>
  </div>
  <div class="actions">
    <button class="btn btn-secondary btn-sm" type="button" onclick="openDisclaimerModal()">Read full disclaimer</button>
    <button class="btn btn-primary btn-sm" type="button" onclick="ackDisclaimer()">I understand</button>
  </div>
</div>

<!-- 7) ADD THIS SMALL ACKNOWLEDGEMENT under the Consult button (inside .consultation-card) -->
<p class="legal-micro">
  By generating insights, you acknowledge the
  <button class="btn btn-ghost btn-sm" type="button" onclick="openDisclaimerModal()" style="padding:0; font-weight:700;">
    disclaimer and limitation of liability
  </button>.
</p>

<!-- 8) ADD THIS MODAL just BEFORE </body> (outside .app-container) -->
<div class="modal-overlay" id="disclaimer-modal" role="dialog" aria-modal="true" aria-labelledby="disclaimer-title" aria-hidden="true">
  <div class="modal">
    <div class="modal-header">
      <div class="modal-title" id="disclaimer-title">‚öñÔ∏è Educational Disclaimer & Limitation of Liability</div>
      <button class="icon-btn" type="button" onclick="closeDisclaimerModal()" aria-label="Close disclaimer">‚úï</button>
    </div>
    <div class="modal-body">
      <p>
        The ‚ÄúNobel Council‚Äù feature provides educational, general-information content generated from algorithmic analysis and
        subjective interpretation of publicly available laureate speeches and related materials.
      </p>
      <ul>
        <li><strong>No endorsement / no affiliation.</strong> This product is not affiliated with, endorsed by, or sponsored by any Nobel laureate, the Nobel Committee, or the Nobel Foundation.</li>
        <li><strong>Not the laureates‚Äô views.</strong> Outputs are <em>interpretations</em> and do not reflect the ideas, values, opinions, or intentions of the laureates themselves.</li>
        <li><strong>Not professional advice.</strong> Content is not medical, legal, financial, regulatory, or professional advice, and must not be relied upon as such.</li>
        <li><strong>No warranties.</strong> We make no representations or warranties regarding accuracy, completeness, timeliness, or fitness for any purpose.</li>
        <li><strong>User responsibility.</strong> You are solely responsible for decisions made using or relying on this content.</li>
        <li><strong>Limitation of liability.</strong> To the maximum extent permitted by law, we disclaim any and all liability for any loss, damage, or claim (direct, indirect, incidental, consequential, special, exemplary, or otherwise) arising from or related to use of this software or its outputs.</li>
      </ul>
      <p class="legal-micro">
        If you do not agree, do not use the ‚ÄúNobel Council‚Äù consultation feature.
      </p>
    </div>
    <div class="modal-footer">
      <button class="btn btn-secondary" type="button" onclick="closeDisclaimerModal()">Close</button>
      <button class="btn btn-primary" type="button" onclick="ackDisclaimer()">I understand</button>
    </div>
  </div>
</div>

<!-- 9) ADD/APPEND THIS JS near the END of your <script> block (after your existing functions are defined is fine) -->
<script>
  // ===== Sidebar (mobile) =====
  function openSidebar(){
    document.body.classList.add('sidebar-open');
    const btn = document.getElementById('sidebar-toggle');
    if (btn) btn.setAttribute('aria-expanded', 'true');
  }
  function closeSidebar(){
    document.body.classList.remove('sidebar-open');
    const btn = document.getElementById('sidebar-toggle');
    if (btn) btn.setAttribute('aria-expanded', 'false');
  }
  (function wireSidebar(){
    const btn = document.getElementById('sidebar-toggle');
    if (btn) btn.addEventListener('click', () => {
      document.body.classList.contains('sidebar-open') ? closeSidebar() : openSidebar();
    });
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') { closeSidebar(); closeDisclaimerModal(); }
    });
  })();

  // ===== Disclaimer gating =====
  const DISCLAIMER_KEY = 'pharmpath_disclaimer_ack_v1';

  function openDisclaimerModal(){
    const modal = document.getElementById('disclaimer-modal');
    if (!modal) return;
    modal.classList.add('active');
    modal.setAttribute('aria-hidden','false');
  }

  function closeDisclaimerModal(){
    const modal = document.getElementById('disclaimer-modal');
    if (!modal) return;
    modal.classList.remove('active');
    modal.setAttribute('aria-hidden','true');
  }

  function hasAckDisclaimer(){
    try { return localStorage.getItem(DISCLAIMER_KEY) === 'true'; } catch { return false; }
  }

  function ackDisclaimer(){
    try { localStorage.setItem(DISCLAIMER_KEY, 'true'); } catch {}
    closeDisclaimerModal();
    toast('‚úÖ Acknowledged', 'Disclaimer saved for this browser session.', 'xp');
  }

  function ensureDisclaimerAck(openIfMissing = true){
    if (hasAckDisclaimer()) return true;
    if (openIfMissing) openDisclaimerModal();
    return false;
  }

  // ===== Context label in mobile topbar =====
  function setGlobalContext(label){
    const el = document.getElementById('global-context');
    if (el) el.textContent = label || 'Dashboard';
  }

  // If you have showTab(tabId) already, integrate these lines inside it:
  //   setGlobalContext(tabId === 'nobel-council' ? 'Nobel Council' : tabId.replace('-', ' '));
  //   if (tabId === 'nobel-council') ensureDisclaimerAck(true);

  // Hardening consultLaureate: block until disclaimer acknowledged
  const _originalConsult = window.consultLaureate;
  window.consultLaureate = function(){
    if (!ensureDisclaimerAck(true)) return;
    if (typeof _originalConsult === 'function') return _originalConsult();
  };

  // On first load: set context and optionally prompt disclaimer when user lands on Nobel Council
  (function initDisclaimerUI(){
    // Infer active tab on load
    const activeTab = document.querySelector('.tab-content.active')?.id || 'dashboard-tab';
    if (activeTab === 'nobel-council-tab') {
      setGlobalContext('Nobel Council');
      ensureDisclaimerAck(true);
    } else {
      setGlobalContext('Dashboard');
    }
  })();

  // Minimal toast helper if yours is not yet defined
  function toast(title, message, kind){
    const container = document.getElementById('toast-container');
    if (!container) return;
    const el = document.createElement('div');
    el.className = 'toast';
    el.innerHTML = `
      <div class="toast-icon ${kind || ''}">‚ú®</div>
      <div class="toast-content">
        <h4>${title || 'Notice'}</h4>
        <p>${message || ''}</p>
      </div>
    `;
    container.appendChild(el);
    setTimeout(() => el.remove(), 3200);
  }
</script>
 })();
</body>
</html>
